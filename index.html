<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; left: 0; right: 0; }
  </style>

  <script>
    L_NO_TOUCH = false;
    L_DISABLE_3D = false;
  </script>

  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
</head>

<body>
  <div id="map"></div>
</body>

<script>
  // ---- MAP ----
  var map = L.map("map", {
    center: [41.365, -76.054],
    crs: L.CRS.EPSG3857,
    zoom: 14,
    zoomControl: true,
    preferCanvas: false
  });

  var tile = L.tileLayer(
    "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
    {
      attribution: "Data by &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.",
      maxZoom: 18
    }
  ).addTo(map);

  // ---- HELPERS ----
  function makeIcon(color) {
    return L.AwesomeMarkers.icon({
      extraClasses: "fa-rotate-0",
      icon: "info-sign",
      iconColor: "white",
      markerColor: color,
      prefix: "glyphicon"
    });
  }

  function makePopupHtml(waypointLabel, color, depthIn, collectedStr) {
    return `
      <div style="font-family: Arial, sans-serif; padding: 10px; border-radius: 8px;
                  background-color: #f8f9fa; border: 2px solid ${color}; width: 200px;">
        <h4 style="margin: 0; color: ${color}; text-align: center;">${waypointLabel}</h4>
        <hr style="border-top: 1px solid ${color};">
        <p style="margin: 5px 0; font-size: 14px;"><b>Ice Depth:</b> ${depthIn} inches</p>
        <p style="margin: 5px 0; font-size: 14px;"><b>Collected:</b> ${collectedStr}</p>
      </div>
    `;
  }

  function addDataset(featureGroup, markerColor, borderColor, collectedStr, points) {
    var icon = makeIcon(markerColor);
    points.forEach(function(p, idx) {
      var waypoint = "Waypoint " + (idx + 1);
      var m = L.marker([p.lat, p.lng]).addTo(featureGroup);
      m.setIcon(icon);

      var popup = L.popup({ maxWidth: 250 });
      popup.setContent(makePopupHtml(waypoint, borderColor, p.depth, collectedStr));
      m.bindPopup(popup);
    });
  }

  // ---- DATASETS ----
  // (Kept your 2025 sets + added the new 2026 set)
  var fg_2025_02_10 = L.featureGroup().addTo(map);
  addDataset(
    fg_2025_02_10,
    "blue", "blue",
    "February 10, 2025",
    [
      { lat: 41.36576, lng: -76.05469, depth: 9.0  },
      { lat: 41.36581, lng: -76.05458, depth: 10.5 },
      { lat: 41.36604, lng: -76.05405, depth: 9.0  },
      { lat: 41.36593, lng: -76.05398, depth: 9.0  },
      { lat: 41.36529, lng: -76.05497, depth: 9.2  },
      { lat: 41.36516, lng: -76.05565, depth: 10.0 },
      { lat: 41.36455, lng: -76.05521, depth: 10.0 },
      { lat: 41.36429, lng: -76.05605, depth: 9.8  }
    ]
  );

  var fg_2025_02_15 = L.featureGroup().addTo(map);
  addDataset(
    fg_2025_02_15,
    "red", "red",
    "February 15, 2025",
    [
      { lat: 41.36496, lng: -76.05551, depth: 11.0 },
      { lat: 41.36579, lng: -76.05338, depth: 10.5 },
      { lat: 41.36635, lng: -76.05178, depth: 10.4 },
      { lat: 41.36675, lng: -76.05091, depth: 10.5 },
      { lat: 41.36696, lng: -76.05103, depth: 9.5  },
      { lat: 41.36660, lng: -76.05337, depth: 11.0 },
      { lat: 41.36624, lng: -76.05500, depth: 10.0 },
      { lat: 41.36562, lng: -76.05621, depth: 10.5 },
      { lat: 41.36488, lng: -76.05463, depth: 9.4  }
    ]
  );

  var fg_2025_02_17 = L.featureGroup().addTo(map);
  addDataset(
    fg_2025_02_17,
    "green", "green",
    "February 17, 2025",
    [
      { lat: 41.36493, lng: -76.05688, depth: 10.75 },
      { lat: 41.36587, lng: -76.05568, depth: 10.0  },
      { lat: 41.36627, lng: -76.05348, depth: 10.75 },
      { lat: 41.36514, lng: -76.05391, depth: 11.0  },
      { lat: 41.36480, lng: -76.05620, depth: 10.75 }
    ]
  );

  var fg_2025_02_23 = L.featureGroup().addTo(map);
  addDataset(
    fg_2025_02_23,
    "purple", "purple",
    "February 23, 2025",
    [
      { lat: 41.36602, lng: -76.05655, depth: 13.0  },
      { lat: 41.36609, lng: -76.05458, depth: 12.0  },
      { lat: 41.36748, lng: -76.05192, depth: 12.5  },
      { lat: 41.36761, lng: -76.05056, depth: 11.75 },
      { lat: 41.36622, lng: -76.05224, depth: 12.5  },
      { lat: 41.36487, lng: -76.05455, depth: 12.25 },
      { lat: 41.36459, lng: -76.05658, depth: 13.0  }
    ]
  );

  // ---- NEW: FEBRUARY 15, 2026 ----
  var fg_2026_02_15 = L.featureGroup().addTo(map);
  addDataset(
    fg_2026_02_15,
    "orange", "orange",
    "February 15, 2026",
    [
      { lat: 41.36536, lng: -76.05671, depth: 13.5 },
      { lat: 41.36458, lng: -76.05599, depth: 13.5 },
      { lat: 41.36403, lng: -76.05496, depth: 13.5 },
      { lat: 41.36473, lng: -76.05352, depth: 13.5 },
      { lat: 41.36655, lng: -76.05417, depth: 11.5 },
      { lat: 41.36631, lng: -76.05347, depth: 11.5 },
      { lat: 41.36587, lng: -76.05152, depth: 15.0 },
      { lat: 41.36670, lng: -76.04930, depth: 13.5 },
      { lat: 41.36759, lng: -76.05027, depth: 10.5 },
      { lat: 41.36845, lng: -76.05107, depth: 12.5 },
      { lat: 41.36843, lng: -76.04916, depth: 8.5  }
    ]
  );

  // ---- LAYER CONTROL ----
  var overlays = {};
  overlays['<span style="color: blue; font-weight: bold;">February 10, 2025</span>'] = fg_2025_02_10;
  overlays['<span style="color: red; font-weight: bold;">February 15, 2025</span>'] = fg_2025_02_15;
  overlays['<span style="color: green; font-weight: bold;">February 17, 2025</span>'] = fg_2025_02_17;
  overlays['<span style="color: purple; font-weight: bold;">February 23, 2025</span>'] = fg_2025_02_23;
  overlays['<span style="color: orange; font-weight: bold;">February 15, 2026</span>'] = fg_2026_02_15;

  L.control.layers(
    { "openstreetmap": tile },
    overlays,
    { collapsed: false, position: "topright" }
  ).addTo(map);
</script>
</html>
